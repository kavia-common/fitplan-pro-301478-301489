{"is_source_file": true, "format": "Python (FastAPI with SQLAlchemy and Pydantic)", "description": "This file defines API routes related to workout management in a fitness application. It includes endpoints to generate personalized workouts, create custom workouts, and retrieve workout history. The implementation showcases complex logic for selecting exercises based on user goals and equipment, as well as data validation and interaction with database models.", "external_files": ["src.database.connection", "src.models", "src.schemas.workout", "src.schemas.workout_exercise"], "external_methods": ["get_db", "User.query", "Exercise.query", "Equipment.query", "Workout.query", "WorkoutExercise.query", "WorkoutLog.query"], "published": ["router"], "classes": [{"name": "WorkoutGenerateRequest", "description": "Schema for request to generate a workout, including user ID, goal, optional equipment list, and duration."}, {"name": "WorkoutGenerateResponse", "description": "Schema for the generated workout response containing workout ID, goal, exercises details, and estimated duration."}, {"name": "CustomWorkoutRequest", "description": "Schema for creating a custom workout with user ID, goal, and list of exercises with target sets/reps."}], "methods": [{"name": "WorkoutGenerateResponse generate_workout( request: WorkoutGenerateRequest, db: Session = Depends(get_db) )", "description": "Endpoint to generate a personalized workout plan based on user preferences, involving validation, exercise selection, and storing the workout in the database.", "scope": "", "scopeKind": ""}, {"name": "WorkoutGenerateResponse create_custom_workout( request: CustomWorkoutRequest, db: Session = Depends(get_db) )", "description": "Endpoint to create a custom workout with user-selected exercises, validating inputs, and saving to database.", "scope": "", "scopeKind": ""}, {"name": "List[dict] get_workout_history( user_id: UUID, limit: int = 20, db: Session = Depends(get_db) )", "description": "Endpoint to retrieve a user's workout history along with logs and exercises performed.", "scope": "", "scopeKind": ""}], "calls": ["db.query(User).filter(User.id == request.user_id).first()", "db.query(Exercise)", "db.query(Equipment).filter(Equipment.name.in_(request.equipment)).all()", "db.query(Workout).filter(Workout.user_id == user_id)", "db.query(WorkoutExercise, Exercise).join(Exercise, WorkoutExercise.exercise_id == Exercise.id).filter(WorkoutExercise.workout_id == workout.id)", "db.query(WorkoutLog).filter(WorkoutLog.workout_id == workout.id)"], "search-terms": ["workout generation endpoint", "exercise selection based on equipment", "workout history retrieval", "custom workout creation", "exercise grouping by muscle", "fitness goal validation"], "state": 2, "file_id": 26, "knowledge_revision": 62, "git_revision": "", "ctags": [{"_type": "tag", "name": "CustomWorkoutRequest", "path": "/home/kavia/workspace/code-generation/fitplan-pro-301478-301489/workout_backend/src/api/routes/workouts.py", "pattern": "/^class CustomWorkoutRequest(BaseModel):$/", "language": "Python", "kind": "class"}, {"_type": "tag", "name": "WorkoutGenerateRequest", "path": "/home/kavia/workspace/code-generation/fitplan-pro-301478-301489/workout_backend/src/api/routes/workouts.py", "pattern": "/^class WorkoutGenerateRequest(BaseModel):$/", "language": "Python", "kind": "class"}, {"_type": "tag", "name": "WorkoutGenerateResponse", "path": "/home/kavia/workspace/code-generation/fitplan-pro-301478-301489/workout_backend/src/api/routes/workouts.py", "pattern": "/^class WorkoutGenerateResponse(BaseModel):$/", "language": "Python", "kind": "class"}, {"_type": "tag", "name": "create_custom_workout", "path": "/home/kavia/workspace/code-generation/fitplan-pro-301478-301489/workout_backend/src/api/routes/workouts.py", "pattern": "/^async def create_custom_workout($/", "language": "Python", "typeref": "typename:WorkoutGenerateResponse", "kind": "function", "signature": "( request: CustomWorkoutRequest, db: Session = Depends(get_db) )"}, {"_type": "tag", "name": "duration_minutes", "path": "/home/kavia/workspace/code-generation/fitplan-pro-301478-301489/workout_backend/src/api/routes/workouts.py", "pattern": "/^    duration_minutes: Optional[int] = Field(45, description=\"Target workout duration in minutes\"/", "language": "Python", "typeref": "typename:Optional[int]", "kind": "variable", "scope": "WorkoutGenerateRequest", "scopeKind": "class"}, {"_type": "tag", "name": "equipment", "path": "/home/kavia/workspace/code-generation/fitplan-pro-301478-301489/workout_backend/src/api/routes/workouts.py", "pattern": "/^    equipment: Optional[List[str]] = Field(None, description=\"List of available equipment names /", "language": "Python", "typeref": "typename:Optional[List[str]]", "kind": "variable", "scope": "WorkoutGenerateRequest", "scopeKind": "class"}, {"_type": "tag", "name": "estimated_duration", "path": "/home/kavia/workspace/code-generation/fitplan-pro-301478-301489/workout_backend/src/api/routes/workouts.py", "pattern": "/^    estimated_duration: int = Field(..., description=\"Estimated workout duration in minutes\")$/", "language": "Python", "typeref": "typename:int", "kind": "variable", "scope": "WorkoutGenerateResponse", "scopeKind": "class"}, {"_type": "tag", "name": "exercises", "path": "/home/kavia/workspace/code-generation/fitplan-pro-301478-301489/workout_backend/src/api/routes/workouts.py", "pattern": "/^    exercises: List[dict] = Field(..., description=\"List of exercises with details\")$/", "language": "Python", "typeref": "typename:List[dict]", "kind": "variable", "scope": "WorkoutGenerateResponse", "scopeKind": "class"}, {"_type": "tag", "name": "exercises", "path": "/home/kavia/workspace/code-generation/fitplan-pro-301478-301489/workout_backend/src/api/routes/workouts.py", "pattern": "/^    exercises: List[dict] = Field(..., description=\"List of exercises with exercise_id, target_s/", "language": "Python", "typeref": "typename:List[dict]", "kind": "variable", "scope": "CustomWorkoutRequest", "scopeKind": "class"}, {"_type": "tag", "name": "generate_workout", "path": "/home/kavia/workspace/code-generation/fitplan-pro-301478-301489/workout_backend/src/api/routes/workouts.py", "pattern": "/^async def generate_workout($/", "language": "Python", "typeref": "typename:WorkoutGenerateResponse", "kind": "function", "signature": "( request: WorkoutGenerateRequest, db: Session = Depends(get_db) )"}, {"_type": "tag", "name": "get_workout_history", "path": "/home/kavia/workspace/code-generation/fitplan-pro-301478-301489/workout_backend/src/api/routes/workouts.py", "pattern": "/^async def get_workout_history($/", "language": "Python", "typeref": "typename:List[dict]", "kind": "function", "signature": "( user_id: UUID, limit: int = 20, db: Session = Depends(get_db) )"}, {"_type": "tag", "name": "goal", "path": "/home/kavia/workspace/code-generation/fitplan-pro-301478-301489/workout_backend/src/api/routes/workouts.py", "pattern": "/^    goal: str = Field(..., description=\"Workout goal: 'strength', 'hypertrophy', 'endurance', 'w/", "language": "Python", "typeref": "typename:str", "kind": "variable", "scope": "WorkoutGenerateRequest", "scopeKind": "class"}, {"_type": "tag", "name": "goal", "path": "/home/kavia/workspace/code-generation/fitplan-pro-301478-301489/workout_backend/src/api/routes/workouts.py", "pattern": "/^    goal: str = Field(..., description=\"Workout goal\")$/", "language": "Python", "typeref": "typename:str", "kind": "variable", "scope": "CustomWorkoutRequest", "scopeKind": "class"}, {"_type": "tag", "name": "goal", "path": "/home/kavia/workspace/code-generation/fitplan-pro-301478-301489/workout_backend/src/api/routes/workouts.py", "pattern": "/^    goal: str = Field(..., description=\"Workout goal\")$/", "language": "Python", "typeref": "typename:str", "kind": "variable", "scope": "WorkoutGenerateResponse", "scopeKind": "class"}, {"_type": "tag", "name": "router", "path": "/home/kavia/workspace/code-generation/fitplan-pro-301478-301489/workout_backend/src/api/routes/workouts.py", "pattern": "/^router = APIRouter(prefix=\"\\/workouts\", tags=[\"workouts\"])$/", "language": "Python", "kind": "variable"}, {"_type": "tag", "name": "user_id", "path": "/home/kavia/workspace/code-generation/fitplan-pro-301478-301489/workout_backend/src/api/routes/workouts.py", "pattern": "/^    user_id: UUID = Field(..., description=\"User ID for whom to generate the workout\")$/", "language": "Python", "typeref": "typename:UUID", "kind": "variable", "scope": "WorkoutGenerateRequest", "scopeKind": "class"}, {"_type": "tag", "name": "user_id", "path": "/home/kavia/workspace/code-generation/fitplan-pro-301478-301489/workout_backend/src/api/routes/workouts.py", "pattern": "/^    user_id: UUID = Field(..., description=\"User ID who owns the workout\")$/", "language": "Python", "typeref": "typename:UUID", "kind": "variable", "scope": "CustomWorkoutRequest", "scopeKind": "class"}, {"_type": "tag", "name": "workout_id", "path": "/home/kavia/workspace/code-generation/fitplan-pro-301478-301489/workout_backend/src/api/routes/workouts.py", "pattern": "/^    workout_id: UUID = Field(..., description=\"Unique identifier for the generated workout\")$/", "language": "Python", "typeref": "typename:UUID", "kind": "variable", "scope": "WorkoutGenerateResponse", "scopeKind": "class"}], "hash": "da3c610f55669330f27081b913f143da", "format-version": 4, "code-base-name": "workout_backend", "filename": "workout_backend/src/api/routes/workouts.py", "fields": [{"name": "Optional[int] duration_minutes", "scope": "WorkoutGenerateRequest", "scopeKind": "class", "description": "unavailable"}, {"name": "Optional[List[str]] equipment", "scope": "WorkoutGenerateRequest", "scopeKind": "class", "description": "unavailable"}, {"name": "int estimated_duration", "scope": "WorkoutGenerateResponse", "scopeKind": "class", "description": "unavailable"}, {"name": "List[dict] exercises", "scope": "WorkoutGenerateResponse", "scopeKind": "class", "description": "unavailable"}, {"name": "str goal", "scope": "WorkoutGenerateRequest", "scopeKind": "class", "description": "unavailable"}, {"name": "router = APIRouter(prefix=\"\\/workouts\", tags=[\"workouts\"])", "scope": "", "scopeKind": "", "description": "unavailable"}, {"name": "UUID user_id", "scope": "WorkoutGenerateRequest", "scopeKind": "class", "description": "unavailable"}, {"name": "UUID workout_id", "scope": "WorkoutGenerateResponse", "scopeKind": "class", "description": "unavailable"}], "revision_history": [{"62": ""}]}